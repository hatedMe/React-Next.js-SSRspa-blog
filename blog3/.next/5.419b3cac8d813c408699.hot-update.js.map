{"version":3,"sources":["D:/wrok/React-Next.js-SSRspa-blog/blog3/pages\\article.js"],"names":["Article","props","highlightCode","domNode","ReactDOM","findDOMNode","nodes","querySelectorAll","i","length","hljs","highlightBlock","data","content","title","createTime","category","labels","iNow","moment","format","__html","query","pathname","fetch","id","rusllut","json","res","React","Component"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;IAGMA,O;;;AACF,qBAAYC,KAAZ,EAAkB;AAAA;;AAAA,iHACRA,KADQ;AAEjB;;;;6CASmB;AAChB,iBAAKC,aAAL;AACH;;;;;;;;;AAGG,qCAAKA,aAAL;;;;;;;;;;;;;;;;;;wCAGW;AACX,gBAAMC,UAAU,iDAAAC,CAASC,WAAT,CAAqB,IAArB,CAAhB;AACA,gBAAMC,QAAQH,QAAQI,gBAAR,CAAyB,UAAzB,CAAd;AACA,iBAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIF,MAAMG,MAA1B,EAAkCD,GAAlC,EAAuC;AACnCE,gBAAA,oDAAAA,CAAKC,cAAL,CAAoBL,MAAME,CAAN,CAApB;AACH;AACJ;;;iCAEQ;AAAA,8BACqD,KAAKP,KAAL,CAAWW,IADhE;AAAA,gBACCC,OADD,eACCA,OADD;AAAA,gBACUC,KADV,eACUA,KADV;AAAA,gBACkBC,UADlB,eACkBA,UADlB;AAAA,gBAC+BC,QAD/B,eAC+BA,QAD/B;AAAA,gBAC0CC,MAD1C,eAC0CA,MAD1C;;AAEL,gBAAIC,OAAO,uDAAAC,CAAOJ,UAAP,EAAmBK,MAAnB,CAA0B,YAA1B,CAAX;AACA;AACA,mBACI;AAAA;AAAA,kBAAK,WAAU,MAAf;AAAA;AAAA;AAAA;AAAA;AACI,4EAAC,uEAAD;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ;AAEI;AAAA;AAAA,sBAAK,IAAG,SAAR;AAAA;AAAA;AAAA;AAAA;AACI;AAAA;AAAA,0BAAK,IAAG,SAAR;AAAA;AAAA;AAAA;AAAA;AACI;AAAA;AAAA,8BAAS,WAAU,MAAnB;AAAA;AAAA;AAAA;AAAA;AACI;AAAA;AAAA,kCAAQ,WAAU,aAAlB;AAAA;AAAA;AAAA;AAAA;AACI;AAAA;AAAA,sCAAI,WAAU,YAAd;AAAA;AAAA;AAAA;AAAA;AAA6BN;AAA7B,iCADJ;AAEI;AAAA;AAAA,sCAAM,WAAU,WAAhB;AAAA;AAAA;AAAA;AAAA;AAA8BI;AAA9B;AAFJ,6BADJ;AAKI;AAAA;AAAA,kCAAK,WAAU,cAAf;AAAA;AAAA;AAAA;AAAA;AAEQ,qGAAK,WAAU,wCAAf,EAAwD,yBAAyB,EAACG,QAASR,OAAV,EAAjF;AAAA;AAAA;AAAA;AAAA;AAFR,6BALJ;AAUI,wFAAC,8EAAD,IAAe,QAAQI,MAAvB;AAAA;AAAA;AAAA;AAAA;AAVJ;AADJ;AADJ,iBAFJ;AAkBI,4EAAC,uEAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAlBJ,aADJ;AAsBH;;;;;;;;;;oBAlD6BK,K,SAAAA,K;oBAAOC,Q,SAAAA,Q;;;;;;;uCAEbC,6CAA4CF,MAAMG,EAAlD,C;;;AAAhBC,uC;;uCACYA,QAAQC,IAAR,E;;;AAAZC,mC;kEAEG,EAAEhB,MAAMgB,IAAIhB,IAAZ,E;;;;;;;;;;;;;;;;;;;EATO,6CAAAiB,CAAMC,S;;eAyDb9B,O;;;AAAf;;;;;;;;;;;;4BAzDMA,O","file":"5.419b3cac8d813c408699.hot-update.js","sourcesContent":["\r\n\r\n\r\nimport React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport Header from '../compontents/Header.js';\r\nimport Pagination from '../compontents/Pagination.js';\r\nimport Footer from '../compontents/Footer.js';\r\nimport ArticleFooter from '../compontents/articleFooter.js';\r\nimport 'isomorphic-fetch';\r\nimport moment from '../lib/moment.min';\r\nimport hljs from 'highlight.js';\r\n\r\n\r\nclass Article extends React.Component {\r\n    constructor(props){\r\n        super(props);\r\n    }\r\n    static async getInitialProps({query, pathname}) {\r\n\r\n        let rusllut = await fetch(`http://api.djui.cn/api/article?id=${ query.id }`);\r\n        let res = await rusllut.json();\r\n\r\n        return { data: res.data }\r\n    }\r\n\r\n    componentDidUpdate(){\r\n        this.highlightCode();\r\n    }\r\n\r\n    async componentDidMount(){\r\n        this.highlightCode();\r\n    }\r\n\r\n    highlightCode(){\r\n        const domNode = ReactDOM.findDOMNode(this);\r\n        const nodes = domNode.querySelectorAll('pre code');\r\n        for (let i = 0; i < nodes.length; i++) {\r\n            hljs.highlightBlock(nodes[i]);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        let { content ,title , createTime , category , labels } = this.props.data;\r\n        let iNow = moment(createTime).format('YYYY-MM-DD');\r\n        // console.log( this.props.data );\r\n        return (\r\n            <div className=\"page\">\r\n                <Header />\r\n                <div id=\"content\">\r\n                    <div id=\"primary\">\r\n                        <article className=\"post\">\r\n                            <header className=\"post-header\">\r\n                                <h1 className=\"post-title\">{ title }</h1>\r\n                                <time className=\"post-time\">{ iNow }</time>\r\n                            </header>\r\n                            <div className=\"post-content\">\r\n                                {\r\n                                    <div className=\"language-name-of-snippet markdown-body\" dangerouslySetInnerHTML={{__html : content}}></div>\r\n                                }\r\n                            </div>\r\n                            <ArticleFooter labels={labels} />\r\n                        </article>\r\n                    </div>\r\n                </div>\r\n                <Footer />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Article;\r\n\n\n\n// WEBPACK FOOTER //\n// ./pages/article.js"],"sourceRoot":""}